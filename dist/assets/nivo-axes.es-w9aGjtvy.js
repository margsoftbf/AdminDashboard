import{m as bn,r as D,j as S}from"./index-_V2D8R4J.js";import{aD as Vt,aE as tn,aF as an,aG as Jt,aH as Qt,aI as qn,aJ as N,aK as dn,aL as un,aM as mn,aN as Pe,aO as Zt,aP as nr,aQ as Ye,aR as er,aS as tr,aT as rr,aU as ir,r as ar,aV as He,y as ur,k as Re,aW as or,aX as cr,aY as je,E as Ie,B as Be,aZ as We,i as qe,a_ as fr,a$ as Le,b0 as sr,H as lr,q as Xe,b1 as gr,b2 as hr,b3 as dr,a as mr,b as xr,p as vr,b4 as oe,b5 as ce,b6 as yr,b7 as pr,b8 as br,b9 as Mr,ba as wr,bb as kr,bc as Tr,bd as Cr,be as $r,bf as Sr,bg as Ar,bh as Dr,bi as _r,bj as Ur,bk as Nn,bl as Fr,bm as Er,L as Ln,N as nn,Z as ze,a6 as Ge,M as Nr,bn as Or,J as fe}from"./nivo-legends.es-bsX124o3.js";import{P as M}from"./index-h7GAENir.js";function Ke(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function Xn(n){let e=n,t=n;n.length===1&&(e=(a,o)=>n(a)-o,t=Pr(n));function r(a,o,c,f){for(c==null&&(c=0),f==null&&(f=a.length);c<f;){const s=c+f>>>1;t(a[s],o)<0?c=s+1:f=s}return c}function i(a,o,c,f){for(c==null&&(c=0),f==null&&(f=a.length);c<f;){const s=c+f>>>1;t(a[s],o)>0?f=s:c=s+1}return c}function u(a,o,c,f){c==null&&(c=0),f==null&&(f=a.length);const s=r(a,o,c,f-1);return s>c&&e(a[s-1],o)>-e(a[s],o)?s-1:s}return{left:r,center:u,right:i}}function Pr(n){return(e,t)=>Ke(n(e),t)}function Yr(n){return n===null?NaN:+n}const Hr=Xn(Ke),Rr=Hr.right;Xn(Yr).center;const jr=Rr;var On=Math.sqrt(50),Pn=Math.sqrt(10),Yn=Math.sqrt(2);function Hn(n,e,t){var r,i=-1,u,a,o;if(e=+e,n=+n,t=+t,n===e&&t>0)return[n];if((r=e<n)&&(u=n,n=e,e=u),(o=Ve(n,e,t))===0||!isFinite(o))return[];if(o>0){let c=Math.round(n/o),f=Math.round(e/o);for(c*o<n&&++c,f*o>e&&--f,a=new Array(u=f-c+1);++i<u;)a[i]=(c+i)*o}else{o=-o;let c=Math.round(n*o),f=Math.round(e*o);for(c/o<n&&++c,f/o>e&&--f,a=new Array(u=f-c+1);++i<u;)a[i]=(c+i)/o}return r&&a.reverse(),a}function Ve(n,e,t){var r=(e-n)/Math.max(0,t),i=Math.floor(Math.log(r)/Math.LN10),u=r/Math.pow(10,i);return i>=0?(u>=On?10:u>=Pn?5:u>=Yn?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(u>=On?10:u>=Pn?5:u>=Yn?2:1)}function Rn(n,e,t){var r=Math.abs(e-n)/Math.max(0,t),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),u=r/i;return u>=On?i*=10:u>=Pn?i*=5:u>=Yn&&(i*=2),e<n?-i:i}function Ir(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,u=new Array(i);++r<i;)u[r]=n+r*t;return u}function zn(){var n=Vt().unknown(void 0),e=n.domain,t=n.range,r=0,i=1,u,a,o=!1,c=0,f=0,s=.5;delete n.unknown;function g(){var l=e().length,h=i<r,d=h?i:r,m=h?r:i;u=(m-d)/Math.max(1,l-c+f*2),o&&(u=Math.floor(u)),d+=(m-d-u*(l-c))*s,a=u*(1-c),o&&(d=Math.round(d),a=Math.round(a));var v=Ir(l).map(function(p){return d+u*p});return t(h?v.reverse():v)}return n.domain=function(l){return arguments.length?(e(l),g()):e()},n.range=function(l){return arguments.length?([r,i]=l,r=+r,i=+i,g()):[r,i]},n.rangeRound=function(l){return[r,i]=l,r=+r,i=+i,o=!0,g()},n.bandwidth=function(){return a},n.step=function(){return u},n.round=function(l){return arguments.length?(o=!!l,g()):o},n.padding=function(l){return arguments.length?(c=Math.min(1,f=+l),g()):c},n.paddingInner=function(l){return arguments.length?(c=Math.min(1,l),g()):c},n.paddingOuter=function(l){return arguments.length?(f=+l,g()):f},n.align=function(l){return arguments.length?(s=Math.max(0,Math.min(1,l)),g()):s},n.copy=function(){return zn(e(),[r,i]).round(o).paddingInner(c).paddingOuter(f).align(s)},tn.apply(g(),arguments)}function Je(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return Je(e())},n}function Br(){return Je(zn.apply(null,arguments).paddingInner(1))}function Gn(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function Qe(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function sn(){}var on=.7,xn=1/on,en="\\s*([+-]?\\d+)\\s*",cn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",H="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wr=/^#([0-9a-f]{3,8})$/,qr=new RegExp("^rgb\\("+[en,en,en]+"\\)$"),Lr=new RegExp("^rgb\\("+[H,H,H]+"\\)$"),Xr=new RegExp("^rgba\\("+[en,en,en,cn]+"\\)$"),zr=new RegExp("^rgba\\("+[H,H,H,cn]+"\\)$"),Gr=new RegExp("^hsl\\("+[cn,H,H]+"\\)$"),Kr=new RegExp("^hsla\\("+[cn,H,H,cn]+"\\)$"),se={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gn(sn,fn,{copy:function(n){return Object.assign(new this.constructor,this,n)},displayable:function(){return this.rgb().displayable()},hex:le,formatHex:le,formatHsl:Vr,formatRgb:ge,toString:ge});function le(){return this.rgb().formatHex()}function Vr(){return Ze(this).formatHsl()}function ge(){return this.rgb().formatRgb()}function fn(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Wr.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?he(e):t===3?new U(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?hn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?hn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qr.exec(n))?new U(e[1],e[2],e[3],1):(e=Lr.exec(n))?new U(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Xr.exec(n))?hn(e[1],e[2],e[3],e[4]):(e=zr.exec(n))?hn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Gr.exec(n))?xe(e[1],e[2]/100,e[3]/100,1):(e=Kr.exec(n))?xe(e[1],e[2]/100,e[3]/100,e[4]):se.hasOwnProperty(n)?he(se[n]):n==="transparent"?new U(NaN,NaN,NaN,0):null}function he(n){return new U(n>>16&255,n>>8&255,n&255,1)}function hn(n,e,t,r){return r<=0&&(n=e=t=NaN),new U(n,e,t,r)}function Jr(n){return n instanceof sn||(n=fn(n)),n?(n=n.rgb(),new U(n.r,n.g,n.b,n.opacity)):new U}function jn(n,e,t,r){return arguments.length===1?Jr(n):new U(n,e,t,r??1)}function U(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}Gn(U,jn,Qe(sn,{brighter:function(n){return n=n==null?xn:Math.pow(xn,n),new U(this.r*n,this.g*n,this.b*n,this.opacity)},darker:function(n){return n=n==null?on:Math.pow(on,n),new U(this.r*n,this.g*n,this.b*n,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:de,formatHex:de,formatRgb:me,toString:me}));function de(){return"#"+$n(this.r)+$n(this.g)+$n(this.b)}function me(){var n=this.opacity;return n=isNaN(n)?1:Math.max(0,Math.min(1,n)),(n===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(n===1?")":", "+n+")")}function $n(n){return n=Math.max(0,Math.min(255,Math.round(n)||0)),(n<16?"0":"")+n.toString(16)}function xe(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Y(n,e,t,r)}function Ze(n){if(n instanceof Y)return new Y(n.h,n.s,n.l,n.opacity);if(n instanceof sn||(n=fn(n)),!n)return new Y;if(n instanceof Y)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),u=Math.max(e,t,r),a=NaN,o=u-i,c=(u+i)/2;return o?(e===u?a=(t-r)/o+(t<r)*6:t===u?a=(r-e)/o+2:a=(e-t)/o+4,o/=c<.5?u+i:2-u-i,a*=60):o=c>0&&c<1?0:a,new Y(a,o,c,n.opacity)}function Qr(n,e,t,r){return arguments.length===1?Ze(n):new Y(n,e,t,r??1)}function Y(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Gn(Y,Qr,Qe(sn,{brighter:function(n){return n=n==null?xn:Math.pow(xn,n),new Y(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=n==null?on:Math.pow(on,n),new Y(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new U(Sn(n>=240?n-240:n+120,i,r),Sn(n,i,r),Sn(n<120?n+240:n-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var n=this.opacity;return n=isNaN(n)?1:Math.max(0,Math.min(1,n)),(n===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(n===1?")":", "+n+")")}}));function Sn(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const Kn=n=>()=>n;function Zr(n,e){return function(t){return n+t*e}}function ni(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function ei(n){return(n=+n)==1?nt:function(e,t){return t-e?ni(e,t,n):Kn(isNaN(e)?t:e)}}function nt(n,e){var t=e-n;return t?Zr(n,t):Kn(isNaN(n)?e:n)}const ve=function n(e){var t=ei(e);function r(i,u){var a=t((i=jn(i)).r,(u=jn(u)).r),o=t(i.g,u.g),c=t(i.b,u.b),f=nt(i.opacity,u.opacity);return function(s){return i.r=a(s),i.g=o(s),i.b=c(s),i.opacity=f(s),i+""}}return r.gamma=n,r}(1);function ti(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(u){for(i=0;i<t;++i)r[i]=n[i]*(1-u)+e[i]*u;return r}}function ri(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function ii(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),u=new Array(t),a;for(a=0;a<r;++a)i[a]=Vn(n[a],e[a]);for(;a<t;++a)u[a]=e[a];return function(o){for(a=0;a<r;++a)u[a]=i[a](o);return u}}function ai(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function vn(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function ui(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=Vn(n[i],e[i]):r[i]=e[i];return function(u){for(i in t)r[i]=t[i](u);return r}}var In=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,An=new RegExp(In.source,"g");function oi(n){return function(){return n}}function ci(n){return function(e){return n(e)+""}}function fi(n,e){var t=In.lastIndex=An.lastIndex=0,r,i,u,a=-1,o=[],c=[];for(n=n+"",e=e+"";(r=In.exec(n))&&(i=An.exec(e));)(u=i.index)>t&&(u=e.slice(t,u),o[a]?o[a]+=u:o[++a]=u),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,c.push({i:a,x:vn(r,i)})),t=An.lastIndex;return t<e.length&&(u=e.slice(t),o[a]?o[a]+=u:o[++a]=u),o.length<2?c[0]?ci(c[0].x):oi(e):(e=c.length,function(f){for(var s=0,g;s<e;++s)o[(g=c[s]).i]=g.x(f);return o.join("")})}function Vn(n,e){var t=typeof e,r;return e==null||t==="boolean"?Kn(e):(t==="number"?vn:t==="string"?(r=fn(e))?(e=r,ve):fi:e instanceof fn?ve:e instanceof Date?ai:ri(e)?ti:Array.isArray(e)?ii:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ui:vn)(n,e)}function si(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function li(n){return function(){return n}}function gi(n){return+n}var ye=[0,1];function Q(n){return n}function Bn(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:li(isNaN(e)?NaN:.5)}function hi(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function di(n,e,t){var r=n[0],i=n[1],u=e[0],a=e[1];return i<r?(r=Bn(i,r),u=t(a,u)):(r=Bn(r,i),u=t(u,a)),function(o){return u(r(o))}}function mi(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),u=new Array(r),a=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Bn(n[a],n[a+1]),u[a]=t(e[a],e[a+1]);return function(o){var c=jr(n,o,1,r)-1;return u[c](i[c](o))}}function Mn(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function Jn(){var n=ye,e=ye,t=Vn,r,i,u,a=Q,o,c,f;function s(){var l=Math.min(n.length,e.length);return a!==Q&&(a=hi(n[0],n[l-1])),o=l>2?mi:di,c=f=null,g}function g(l){return l==null||isNaN(l=+l)?u:(c||(c=o(n.map(r),e,t)))(r(a(l)))}return g.invert=function(l){return a(i((f||(f=o(e,n.map(r),vn)))(l)))},g.domain=function(l){return arguments.length?(n=Array.from(l,gi),s()):n.slice()},g.range=function(l){return arguments.length?(e=Array.from(l),s()):e.slice()},g.rangeRound=function(l){return e=Array.from(l),t=si,s()},g.clamp=function(l){return arguments.length?(a=l?!0:Q,s()):a!==Q},g.interpolate=function(l){return arguments.length?(t=l,s()):t},g.unknown=function(l){return arguments.length?(u=l,g):u},function(l,h){return r=l,i=h,s()}}function et(){return Jn()(Q,Q)}function xi(n){return Math.max(0,-an(Math.abs(n)))}function vi(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(an(e)/3)))*3-an(Math.abs(n)))}function yi(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,an(e)-an(n))+1}function pi(n,e,t,r){var i=Rn(n,e,t),u;switch(r=Jt(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(u=vi(i,a))&&(r.precision=u),Qt(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(u=yi(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=u-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(u=xi(i))&&(r.precision=u-(r.type==="%")*2);break}}return qn(r)}function tt(n){var e=n.domain;return n.ticks=function(t){var r=e();return Hn(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return pi(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,u=r.length-1,a=r[i],o=r[u],c,f,s=10;for(o<a&&(f=a,a=o,o=f,f=i,i=u,u=f);s-- >0;){if(f=Ve(a,o,t),f===c)return r[i]=a,r[u]=o,e(r);if(f>0)a=Math.floor(a/f)*f,o=Math.ceil(o/f)*f;else if(f<0)a=Math.ceil(a*f)/f,o=Math.floor(o*f)/f;else break;c=f}return n},n}function rt(){var n=et();return n.copy=function(){return Mn(n,rt())},tn.apply(n,arguments),tt(n)}function it(n,e){n=n.slice();var t=0,r=n.length-1,i=n[t],u=n[r],a;return u<i&&(a=t,t=r,r=a,a=i,i=u,u=a),n[t]=e.floor(i),n[r]=e.ceil(u),n}function pe(n){return Math.log(n)}function be(n){return Math.exp(n)}function bi(n){return-Math.log(-n)}function Mi(n){return-Math.exp(-n)}function wi(n){return isFinite(n)?+("1e"+n):n<0?0:n}function ki(n){return n===10?wi:n===Math.E?Math.exp:function(e){return Math.pow(n,e)}}function Ti(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),function(e){return Math.log(e)/n})}function Me(n){return function(e){return-n(-e)}}function Ci(n){var e=n(pe,be),t=e.domain,r=10,i,u;function a(){return i=Ti(r),u=ki(r),t()[0]<0?(i=Me(i),u=Me(u),n(bi,Mi)):n(pe,be),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(t(o),a()):t()},e.ticks=function(o){var c=t(),f=c[0],s=c[c.length-1],g;(g=s<f)&&(l=f,f=s,s=l);var l=i(f),h=i(s),d,m,v,p=o==null?10:+o,y=[];if(!(r%1)&&h-l<p){if(l=Math.floor(l),h=Math.ceil(h),f>0){for(;l<=h;++l)for(m=1,d=u(l);m<r;++m)if(v=d*m,!(v<f)){if(v>s)break;y.push(v)}}else for(;l<=h;++l)for(m=r-1,d=u(l);m>=1;--m)if(v=d*m,!(v<f)){if(v>s)break;y.push(v)}y.length*2<p&&(y=Hn(f,s,p))}else y=Hn(l,h,Math.min(h-l,p)).map(u);return g?y.reverse():y},e.tickFormat=function(o,c){if(c==null&&(c=r===10?".0e":","),typeof c!="function"&&(c=qn(c)),o===1/0)return c;o==null&&(o=10);var f=Math.max(1,r*o/e.ticks().length);return function(s){var g=s/u(Math.round(i(s)));return g*r<r-.5&&(g*=r),g<=f?c(s):""}},e.nice=function(){return t(it(t(),{floor:function(o){return u(Math.floor(i(o)))},ceil:function(o){return u(Math.ceil(i(o)))}}))},e}function at(){var n=Ci(Jn()).domain([1,10]);return n.copy=function(){return Mn(n,at()).base(n.base())},tn.apply(n,arguments),n}function we(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function ke(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function $i(n){var e=1,t=n(we(e),ke(e));return t.constant=function(r){return arguments.length?n(we(e=+r),ke(e)):e},tt(t)}function ut(){var n=$i(Jn());return n.copy=function(){return Mn(n,ut()).constant(n.constant())},tn.apply(n,arguments)}var Dn=new Date,_n=new Date;function A(n,e,t,r){function i(u){return n(u=arguments.length===0?new Date:new Date(+u)),u}return i.floor=function(u){return n(u=new Date(+u)),u},i.ceil=function(u){return n(u=new Date(u-1)),e(u,1),n(u),u},i.round=function(u){var a=i(u),o=i.ceil(u);return u-a<o-u?a:o},i.offset=function(u,a){return e(u=new Date(+u),a==null?1:Math.floor(a)),u},i.range=function(u,a,o){var c=[],f;if(u=i.ceil(u),o=o==null?1:Math.floor(o),!(u<a)||!(o>0))return c;do c.push(f=new Date(+u)),e(u,o),n(u);while(f<u&&u<a);return c},i.filter=function(u){return A(function(a){if(a>=a)for(;n(a),!u(a);)a.setTime(a-1)},function(a,o){if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!u(a););else for(;--o>=0;)for(;e(a,1),!u(a););})},t&&(i.count=function(u,a){return Dn.setTime(+u),_n.setTime(+a),n(Dn),n(_n),Math.floor(t(Dn,_n))},i.every=function(u){return u=Math.floor(u),!isFinite(u)||!(u>0)?null:u>1?i.filter(r?function(a){return r(a)%u===0}:function(a){return i.count(0,a)%u===0}):i}),i}var yn=A(function(){},function(n,e){n.setTime(+n+e)},function(n,e){return e-n});yn.every=function(n){return n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?A(function(e){e.setTime(Math.floor(e/n)*n)},function(e,t){e.setTime(+e+t*n)},function(e,t){return(t-e)/n}):yn};const Si=yn;yn.range;const R=1e3,F=R*60,j=F*60,L=j*24,Qn=L*7,Te=L*30,Un=L*365;var ot=A(function(n){n.setTime(n-n.getMilliseconds())},function(n,e){n.setTime(+n+e*R)},function(n,e){return(e-n)/R},function(n){return n.getUTCSeconds()});const Z=ot;ot.range;var ct=A(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*R)},function(n,e){n.setTime(+n+e*F)},function(n,e){return(e-n)/F},function(n){return n.getMinutes()});const ft=ct;ct.range;var st=A(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*R-n.getMinutes()*F)},function(n,e){n.setTime(+n+e*j)},function(n,e){return(e-n)/j},function(n){return n.getHours()});const lt=st;st.range;var gt=A(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*F)/L,n=>n.getDate()-1);const ht=gt;gt.range;function X(n){return A(function(e){e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*F)/Qn})}var Zn=X(0),Ai=X(1),Di=X(2),_i=X(3),Ui=X(4),Fi=X(5),Ei=X(6);Zn.range;Ai.range;Di.range;_i.range;Ui.range;Fi.range;Ei.range;var dt=A(function(n){n.setDate(1),n.setHours(0,0,0,0)},function(n,e){n.setMonth(n.getMonth()+e)},function(n,e){return e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12},function(n){return n.getMonth()});const mt=dt;dt.range;var ne=A(function(n){n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,e){n.setFullYear(n.getFullYear()+e)},function(n,e){return e.getFullYear()-n.getFullYear()},function(n){return n.getFullYear()});ne.every=function(n){return!isFinite(n=Math.floor(n))||!(n>0)?null:A(function(e){e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*n)})};const xt=ne;ne.range;var vt=A(function(n){n.setUTCSeconds(0,0)},function(n,e){n.setTime(+n+e*F)},function(n,e){return(e-n)/F},function(n){return n.getUTCMinutes()});const yt=vt;vt.range;var pt=A(function(n){n.setUTCMinutes(0,0,0)},function(n,e){n.setTime(+n+e*j)},function(n,e){return(e-n)/j},function(n){return n.getUTCHours()});const bt=pt;pt.range;var Mt=A(function(n){n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCDate(n.getUTCDate()+e)},function(n,e){return(e-n)/L},function(n){return n.getUTCDate()-1});const wt=Mt;Mt.range;function z(n){return A(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/Qn})}var ee=z(0),Ni=z(1),Oi=z(2),Pi=z(3),Yi=z(4),Hi=z(5),Ri=z(6);ee.range;Ni.range;Oi.range;Pi.range;Yi.range;Hi.range;Ri.range;var kt=A(function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCMonth(n.getUTCMonth()+e)},function(n,e){return e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12},function(n){return n.getUTCMonth()});const Tt=kt;kt.range;var te=A(function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e)},function(n,e){return e.getUTCFullYear()-n.getUTCFullYear()},function(n){return n.getUTCFullYear()});te.every=function(n){return!isFinite(n=Math.floor(n))||!(n>0)?null:A(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*n)})};const Ct=te;te.range;function $t(n,e,t,r,i,u){const a=[[Z,1,R],[Z,5,5*R],[Z,15,15*R],[Z,30,30*R],[u,1,F],[u,5,5*F],[u,15,15*F],[u,30,30*F],[i,1,j],[i,3,3*j],[i,6,6*j],[i,12,12*j],[r,1,L],[r,2,2*L],[t,1,Qn],[e,1,Te],[e,3,3*Te],[n,1,Un]];function o(f,s,g){const l=s<f;l&&([f,s]=[s,f]);const h=g&&typeof g.range=="function"?g:c(f,s,g),d=h?h.range(f,+s+1):[];return l?d.reverse():d}function c(f,s,g){const l=Math.abs(s-f)/g,h=Xn(([,,v])=>v).right(a,l);if(h===a.length)return n.every(Rn(f/Un,s/Un,g));if(h===0)return Si.every(Math.max(Rn(f,s,g),1));const[d,m]=a[l/a[h-1][2]<a[h][2]/l?h-1:h];return d.every(m)}return[o,c]}const[ji,Ii]=$t(Ct,Tt,ee,wt,bt,yt),[Bi,Wi]=$t(xt,mt,Zn,ht,lt,ft);var pn=N(function(){},function(n,e){n.setTime(+n+e)},function(n,e){return e-n});pn.every=function(n){return n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?N(function(e){e.setTime(Math.floor(e/n)*n)},function(e,t){e.setTime(+e+t*n)},function(e,t){return(t-e)/n}):pn};const Ce=pn;pn.range;var St=N(function(n){n.setTime(n-n.getMilliseconds())},function(n,e){n.setTime(+n+e*dn)},function(n,e){return(e-n)/dn},function(n){return n.getUTCSeconds()});const $e=St;St.range;var At=N(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*dn)},function(n,e){n.setTime(+n+e*un)},function(n,e){return(e-n)/un},function(n){return n.getMinutes()});const qi=At;At.range;var Dt=N(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*dn-n.getMinutes()*un)},function(n,e){n.setTime(+n+e*mn)},function(n,e){return(e-n)/mn},function(n){return n.getHours()});const Li=Dt;Dt.range;var _t=N(function(n){n.setDate(1),n.setHours(0,0,0,0)},function(n,e){n.setMonth(n.getMonth()+e)},function(n,e){return e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12},function(n){return n.getMonth()});const Xi=_t;_t.range;var Ut=N(function(n){n.setUTCSeconds(0,0)},function(n,e){n.setTime(+n+e*un)},function(n,e){return(e-n)/un},function(n){return n.getUTCMinutes()});const zi=Ut;Ut.range;var Ft=N(function(n){n.setUTCMinutes(0,0,0)},function(n,e){n.setTime(+n+e*mn)},function(n,e){return(e-n)/mn},function(n){return n.getUTCHours()});const Gi=Ft;Ft.range;var Et=N(function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCMonth(n.getUTCMonth()+e)},function(n,e){return e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12},function(n){return n.getUTCMonth()});const Ki=Et;Et.range;function Vi(n){return new Date(n)}function Ji(n){return n instanceof Date?+n:+new Date(+n)}function re(n,e,t,r,i,u,a,o,c,f){var s=et(),g=s.invert,l=s.domain,h=f(".%L"),d=f(":%S"),m=f("%I:%M"),v=f("%I %p"),p=f("%a %d"),y=f("%b %d"),k=f("%B"),b=f("%Y");function T(x){return(c(x)<x?h:o(x)<x?d:a(x)<x?m:u(x)<x?v:r(x)<x?i(x)<x?p:y:t(x)<x?k:b)(x)}return s.invert=function(x){return new Date(g(x))},s.domain=function(x){return arguments.length?l(Array.from(x,Ji)):l().map(Vi)},s.ticks=function(x){var C=l();return n(C[0],C[C.length-1],x??10)},s.tickFormat=function(x,C){return C==null?T:f(C)},s.nice=function(x){var C=l();return(!x||typeof x.range!="function")&&(x=e(C[0],C[C.length-1],x??10)),x?l(it(C,x)):s},s.copy=function(){return Mn(s,re(n,e,t,r,i,u,a,o,c,f))},s}function Qi(){return tn.apply(re(Bi,Wi,xt,mt,Zn,ht,lt,ft,Z,Pe).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Zi(){return tn.apply(re(ji,Ii,Ct,Tt,ee,wt,bt,yt,Z,Zt).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function na(){}var ea=na,Fn=nr,ta=ea,ra=Ye,ia=1/0,aa=Fn&&1/ra(new Fn([,-0]))[1]==ia?function(n){return new Fn(n)}:ta,ua=aa,oa=er,ca=tr,fa=rr,sa=ir,la=ua,ga=Ye,ha=200;function da(n,e,t){var r=-1,i=ca,u=n.length,a=!0,o=[],c=o;if(t)a=!1,i=fa;else if(u>=ha){var f=e?null:la(n);if(f)return ga(f);a=!1,i=sa,c=new oa}else c=e?[]:o;n:for(;++r<u;){var s=n[r],g=e?e(s):s;if(s=t||s!==0?s:0,a&&g===g){for(var l=c.length;l--;)if(c[l]===g)continue n;e&&c.push(g),o.push(s)}else i(c,g,t)||(c!==o&&c.push(g),o.push(s))}return o}var Nt=da,ma=Nt;function xa(n){return n&&n.length?ma(n):[]}var va=xa;const Se=bn(va);var ya=ar,pa=He,ba=1,Ma=2;function wa(n,e,t,r){var i=t.length,u=i,a=!r;if(n==null)return!u;for(n=Object(n);i--;){var o=t[i];if(a&&o[2]?o[1]!==n[o[0]]:!(o[0]in n))return!1}for(;++i<u;){o=t[i];var c=o[0],f=n[c],s=o[1];if(a&&o[2]){if(f===void 0&&!(c in n))return!1}else{var g=new ya;if(r)var l=r(f,s,c,n,e,g);if(!(l===void 0?pa(s,f,ba|Ma,r,g):l))return!1}}return!0}var ka=wa,Ta=ur;function Ca(n){return n===n&&!Ta(n)}var Ot=Ca,$a=Ot,Sa=Re;function Aa(n){for(var e=Sa(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,$a(i)]}return e}var Da=Aa;function _a(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}var Pt=_a,Ua=ka,Fa=Da,Ea=Pt;function Na(n){var e=Fa(n);return e.length==1&&e[0][2]?Ea(e[0][0],e[0][1]):function(t){return t===n||Ua(t,n,e)}}var Oa=Na,Pa=He,Ya=or,Ha=cr,Ra=je,ja=Ot,Ia=Pt,Ba=Ie,Wa=1,qa=2;function La(n,e){return Ra(n)&&ja(e)?Ia(Ba(n),e):function(t){var r=Ya(t,n);return r===void 0&&r===e?Ha(t,n):Pa(e,r,Wa|qa)}}var Xa=La;function za(n){return function(e){return e==null?void 0:e[n]}}var Ga=za,Ka=Be;function Va(n){return function(e){return Ka(e,n)}}var Ja=Va,Qa=Ga,Za=Ja,nu=je,eu=Ie;function tu(n){return nu(n)?Qa(eu(n)):Za(n)}var ru=tu,iu=Oa,au=Xa,uu=We,ou=qe,cu=ru;function fu(n){return typeof n=="function"?n:n==null?uu:typeof n=="object"?ou(n)?au(n[0],n[1]):iu(n):cu(n)}var Yt=fu,su=Yt,lu=Nt;function gu(n,e){return n&&n.length?lu(n,su(e)):[]}var hu=gu;const du=bn(hu);var mu=fr,xu=Re;function vu(n,e){return n&&mu(n,e,xu)}var yu=vu,pu=Le;function bu(n,e){return function(t,r){if(t==null)return t;if(!pu(t))return n(t,r);for(var i=t.length,u=e?i:-1,a=Object(t);(e?u--:++u<i)&&r(a[u],u,a)!==!1;);return t}}var Mu=bu,wu=yu,ku=Mu,Tu=ku(wu),Cu=Tu,$u=Cu,Su=Le;function Au(n,e){var t=-1,r=Su(n)?Array(n.length):[];return $u(n,function(i,u,a){r[++t]=e(i,u,a)}),r}var Du=Au;function _u(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n}var Uu=_u,Ae=sr;function Fu(n,e){if(n!==e){var t=n!==void 0,r=n===null,i=n===n,u=Ae(n),a=e!==void 0,o=e===null,c=e===e,f=Ae(e);if(!o&&!f&&!u&&n>e||u&&a&&c&&!o&&!f||r&&a&&c||!t&&c||!i)return 1;if(!r&&!u&&!f&&n<e||f&&t&&i&&!r&&!u||o&&t&&i||!a&&i||!c)return-1}return 0}var Eu=Fu,Nu=Eu;function Ou(n,e,t){for(var r=-1,i=n.criteria,u=e.criteria,a=i.length,o=t.length;++r<a;){var c=Nu(i[r],u[r]);if(c){if(r>=o)return c;var f=t[r];return c*(f=="desc"?-1:1)}}return n.index-e.index}var Pu=Ou,En=lr,Yu=Be,Hu=Yt,Ru=Du,ju=Uu,Iu=Xe,Bu=Pu,Wu=We,qu=qe;function Lu(n,e,t){e.length?e=En(e,function(u){return qu(u)?function(a){return Yu(a,u.length===1?u[0]:u)}:u}):e=[Wu];var r=-1;e=En(e,Iu(Hu));var i=Ru(n,function(u,a,o){var c=En(e,function(f){return f(u)});return{criteria:c,index:++r,value:u}});return ju(i,function(u,a){return Bu(u,a,t)})}var Xu=Lu,zu=hr,Gu=Xu,Ku=gr,De=dr,Vu=Ku(function(n,e){if(n==null)return[];var t=e.length;return t>1&&De(n,e[0],e[1])?e=[]:t>2&&De(e[0],e[1],e[2])&&(e=[e[0]]),Gu(n,zu(e,1),[])}),Ju=Vu;const Qu=bn(Ju);var Zu=mr,no=xr,eo="[object Date]";function to(n){return no(n)&&Zu(n)==eo}var ro=to,io=ro,ao=Xe,_e=vr,Ue=_e&&_e.isDate,uo=Ue?ao(Ue):io,oo=uo;const co=bn(oo);function q(){return q=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},q.apply(this,arguments)}var J=[function(n){return n.setMilliseconds(0)},function(n){return n.setSeconds(0)},function(n){return n.setMinutes(0)},function(n){return n.setHours(0)},function(n){return n.setDate(1)},function(n){return n.setMonth(0)}],fo={millisecond:[],second:J.slice(0,1),minute:J.slice(0,2),hour:J.slice(0,3),day:J.slice(0,4),month:J.slice(0,5),year:J.slice(0,6)},so=function(n){return function(e){return fo[n].forEach(function(t){t(e)}),e}},Ht=function(n){var e=n.format,t=e===void 0?"native":e,r=n.precision,i=r===void 0?"millisecond":r,u=n.useUTC,a=u===void 0||u,o=so(i);return function(c){if(c===void 0)return c;if(t==="native"||c instanceof Date)return o(c);var f=a?Fr(t):Er(t);return o(f(c))}},lo=function(n,e,t,r){var i,u,a,o,c=n.min,f=c===void 0?0:c,s=n.max,g=s===void 0?"auto":s,l=n.stacked,h=l!==void 0&&l,d=n.reverse,m=d!==void 0&&d,v=n.clamp,p=v!==void 0&&v,y=n.nice,k=y!==void 0&&y;f==="auto"?i=h===!0?(u=e.minStacked)!=null?u:0:e.min:i=f,g==="auto"?a=h===!0?(o=e.maxStacked)!=null?o:0:e.max:a=g;var b=rt().rangeRound(r==="x"?[0,t]:[t,0]).domain(m?[a,i]:[i,a]).clamp(p);return k===!0?b.nice():typeof k=="number"&&b.nice(k),go(b,h)},go=function(n,e){e===void 0&&(e=!1);var t=n;return t.type="linear",t.stacked=e,t},ho=function(n,e,t){var r=Br().range([0,t]).domain(e.all);return r.type="point",r},mo=function(n,e,t,r){var i=n.round,u=i===void 0||i,a=zn().range(r==="x"?[0,t]:[t,0]).domain(e.all).round(u);return xo(a)},xo=function(n){var e=n;return e.type="band",e},vo=function(n,e,t){var r,i,u=n.format,a=u===void 0?"native":u,o=n.precision,c=o===void 0?"millisecond":o,f=n.min,s=f===void 0?"auto":f,g=n.max,l=g===void 0?"auto":g,h=n.useUTC,d=h===void 0||h,m=n.nice,v=m!==void 0&&m,p=Ht({format:a,precision:c,useUTC:d});r=s==="auto"?p(e.min):a!=="native"?p(s):s,i=l==="auto"?p(e.max):a!=="native"?p(l):l;var y=d?Zi():Qi();y.range([0,t]),r&&i&&y.domain([r,i]),v===!0?y.nice():typeof v!="object"&&typeof v!="number"||y.nice(v);var k=y;return k.type="time",k.useUTC=d,k},yo=function(n,e,t,r){var i,u=n.base,a=u===void 0?10:u,o=n.min,c=o===void 0?"auto":o,f=n.max,s=f===void 0?"auto":f;if(e.all.some(function(m){return m===0}))throw new Error("a log scale domain must not include or cross zero");var g,l,h=!1;if(e.all.filter(function(m){return m!=null}).forEach(function(m){h||(i===void 0?i=Math.sign(m):Math.sign(m)!==i&&(h=!0))}),h)throw new Error("a log scale domain must be strictly-positive or strictly-negative");g=c==="auto"?e.min:c,l=s==="auto"?e.max:s;var d=at().domain([g,l]).rangeRound(r==="x"?[0,t]:[t,0]).base(a).nice();return d.type="log",d},po=function(n,e,t,r){var i,u,a=n.constant,o=a===void 0?1:a,c=n.min,f=c===void 0?"auto":c,s=n.max,g=s===void 0?"auto":s,l=n.reverse,h=l!==void 0&&l;i=f==="auto"?e.min:f,u=g==="auto"?e.max:g;var d=ut().constant(o).rangeRound(r==="x"?[0,t]:[t,0]).nice();h===!0?d.domain([u,i]):d.domain([i,u]);var m=d;return m.type="symlog",m},bo=function(n){return n==="x"?"y":"x"},Mo=function(n,e){return n===e},wo=function(n,e){return n.getTime()===e.getTime()};function Fe(n,e,t,r){switch(n.type){case"linear":return lo(n,e,t,r);case"point":return ho(n,e,t);case"band":return mo(n,e,t,r);case"time":return vo(n,e,t);case"log":return yo(n,e,t,r);case"symlog":return po(n,e,t,r);default:throw new Error("invalid scale spec")}}var Ee=function(n,e,t){var r;if("stacked"in t&&t.stacked){var i=n.data[e==="x"?"xStacked":"yStacked"];return i==null?null:t(i)}return(r=t(n.data[e]))!=null?r:null},Ho=function(n,e,t,r,i){var u=n.map(function(s){return function(g){return q({},g,{data:g.data.map(function(l){return{data:q({},l)}})})}(s)}),a=ko(u,e,t);"stacked"in e&&e.stacked===!0&&To(a,u),"stacked"in t&&t.stacked===!0&&Co(a,u);var o=Fe(e,a.x,r,"x"),c=Fe(t,a.y,i,"y"),f=u.map(function(s){return q({},s,{data:s.data.map(function(g){return q({},g,{position:{x:Ee(g,"x",o),y:Ee(g,"y",c)}})})})});return q({},a,{series:f,xScale:o,yScale:c})},ko=function(n,e,t){return{x:Ne(n,"x",e),y:Ne(n,"y",t)}},Ne=function(n,e,t,r){var i=r===void 0?{}:r,u=i.getValue,a=u===void 0?function(d){return d.data[e]}:u,o=i.setValue,c=o===void 0?function(d,m){d.data[e]=m}:o;if(t.type==="linear")n.forEach(function(d){d.data.forEach(function(m){var v=a(m);v&&c(m,parseFloat(String(v)))})});else if(t.type==="time"&&t.format!=="native"){var f=Ht(t);n.forEach(function(d){d.data.forEach(function(m){var v=a(m);v&&c(m,f(v))})})}var s=[];switch(n.forEach(function(d){d.data.forEach(function(m){s.push(a(m))})}),t.type){case"linear":var g=Qu(Se(s).filter(function(d){return d!==null}),function(d){return d});return{all:g,min:Math.min.apply(Math,g),max:Math.max.apply(Math,g)};case"time":var l=du(s,function(d){return d.getTime()}).slice(0).sort(function(d,m){return m.getTime()-d.getTime()}).reverse();return{all:l,min:l[0],max:Nn(l)};default:var h=Se(s);return{all:h,min:h[0],max:Nn(h)}}},Rt=function(n,e,t){var r=bo(n),i=[];e[r].all.forEach(function(u){var a=co(u)?wo:Mo,o=[];t.forEach(function(c){var f=c.data.find(function(h){return a(h.data[r],u)}),s=null,g=null;if(f!==void 0){if((s=f.data[n])!==null){var l=Nn(o);l===void 0?g=s:l!==null&&(g=l+s)}f.data[n==="x"?"xStacked":"yStacked"]=g}o.push(g),g!==null&&i.push(g)})}),e[n].minStacked=Math.min.apply(Math,i),e[n].maxStacked=Math.max.apply(Math,i)},To=function(n,e){return Rt("x",n,e)},Co=function(n,e){return Rt("y",n,e)},jt=function(n){var e=n.bandwidth();if(e===0)return n;var t=e/2;return n.round()&&(t=Math.round(t)),function(r){var i;return((i=n(r))!=null?i:0)+t}},It={millisecond:[Ce,Ce],second:[$e,$e],minute:[qi,zi],hour:[Li,Gi],day:[N(function(n){return n.setHours(0,0,0,0)},function(n,e){return n.setDate(n.getDate()+e)},function(n,e){return(e.getTime()-n.getTime())/864e5},function(n){return Math.floor(n.getTime()/864e5)}),N(function(n){return n.setUTCHours(0,0,0,0)},function(n,e){return n.setUTCDate(n.getUTCDate()+e)},function(n,e){return(e.getTime()-n.getTime())/864e5},function(n){return Math.floor(n.getTime()/864e5)})],week:[oe,ce],sunday:[oe,ce],monday:[yr,pr],tuesday:[br,Mr],wednesday:[wr,kr],thursday:[Tr,Cr],friday:[$r,Sr],saturday:[Ar,Dr],month:[Xi,Ki],year:[_r,Ur]},$o=Object.keys(It),So=new RegExp("^every\\s*(\\d+)?\\s*("+$o.join("|")+")s?$","i"),Bt=function(n,e){if(Array.isArray(e))return e;if(typeof e=="string"&&"useUTC"in n){var t=e.match(So);if(t){var r=t[1],i=t[2],u=It[i][n.useUTC?1:0];if(i==="day"){var a,o,c=n.domain(),f=c[0],s=c[1],g=new Date(s);return g.setDate(g.getDate()+1),(a=(o=u.every(Number(r??1)))==null?void 0:o.range(f,g))!=null?a:[]}if(r===void 0)return n.ticks(u);var l=u.every(Number(r));if(l)return n.ticks(l)}throw new Error("Invalid tickValues: "+e)}if("ticks"in n){if(e===void 0)return n.ticks();if(typeof(h=e)=="number"&&isFinite(h)&&Math.floor(h)===h)return n.ticks(e)}var h;return n.domain()};function E(){return E=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},E.apply(this,arguments)}var Wt=function(n){var e,t=n.axis,r=n.scale,i=n.ticksPosition,u=n.tickValues,a=n.tickSize,o=n.tickPadding,c=n.tickRotation,f=n.truncateTickAt,s=n.engine,g=s===void 0?"svg":s,l=Bt(r,u),h=Or[g],d="bandwidth"in r?jt(r):r,m={lineX:0,lineY:0},v={textX:0,textY:0},p=typeof document=="object"&&document.dir==="rtl",y=h.align.center,k=h.baseline.center;return t==="x"?(e=function(b){var T;return{x:(T=d(b))!=null?T:0,y:0}},m.lineY=a*(i==="after"?1:-1),v.textY=(a+o)*(i==="after"?1:-1),k=i==="after"?h.baseline.top:h.baseline.bottom,c===0?y=h.align.center:i==="after"&&c<0||i==="before"&&c>0?(y=h.align[p?"left":"right"],k=h.baseline.center):(i==="after"&&c>0||i==="before"&&c<0)&&(y=h.align[p?"right":"left"],k=h.baseline.center)):(e=function(b){var T;return{x:0,y:(T=d(b))!=null?T:0}},m.lineX=a*(i==="after"?1:-1),v.textX=(a+o)*(i==="after"?1:-1),y=i==="after"?h.align.left:h.align.right),{ticks:l.map(function(b){var T=typeof b=="string"?function(x){var C=String(x).length;return f&&f>0&&C>f?""+String(x).slice(0,f).concat("..."):""+x}(b):b;return E({key:b instanceof Date?""+b.valueOf():""+b,value:T},e(b),m,v)}),textAlign:y,textBaseline:k}},qt=function(n,e){if(n===void 0||typeof n=="function")return n;if(e.type==="time"){var t=Pe(n);return function(r){return t(r instanceof Date?r:new Date(r))}}return qn(n)},Wn=function(n){var e,t=n.width,r=n.height,i=n.scale,u=n.axis,a=n.values,o=(e=a,(Array.isArray(e)?a:void 0)||Bt(i,a)),c="bandwidth"in i?jt(i):i,f=u==="x"?o.map(function(s){var g,l;return{key:s instanceof Date?""+s.valueOf():""+s,x1:(g=c(s))!=null?g:0,x2:(l=c(s))!=null?l:0,y1:0,y2:r}}):o.map(function(s){var g,l;return{key:s instanceof Date?""+s.valueOf():""+s,x1:0,x2:t,y1:(g=c(s))!=null?g:0,y2:(l=c(s))!=null?l:0}});return f},Ao=D.memo(function(n){var e,t=n.value,r=n.format,i=n.lineX,u=n.lineY,a=n.onClick,o=n.textBaseline,c=n.textAnchor,f=n.animatedProps,s=Ln(),g=s.axis.ticks.line,l=s.axis.ticks.text,h=(e=r==null?void 0:r(t))!=null?e:t,d=D.useMemo(function(){var m={opacity:f.opacity};return a?{style:E({},m,{cursor:"pointer"}),onClick:function(v){return a(v,h)}}:{style:m}},[f.opacity,a,h]);return S.jsxs(nn.g,E({transform:f.transform},d,{children:[S.jsx("line",{x1:0,x2:i,y1:0,y2:u,style:g}),l.outlineWidth>0&&S.jsx(nn.text,{dominantBaseline:o,textAnchor:c,transform:f.textTransform,style:l,strokeWidth:2*l.outlineWidth,stroke:l.outlineColor,strokeLinejoin:"round",children:""+h}),S.jsx(nn.text,{dominantBaseline:o,textAnchor:c,transform:f.textTransform,style:l,children:""+h})]}))}),Do=function(n){var e=n.axis,t=n.scale,r=n.x,i=r===void 0?0:r,u=n.y,a=u===void 0?0:u,o=n.length,c=n.ticksPosition,f=n.tickValues,s=n.tickSize,g=s===void 0?5:s,l=n.tickPadding,h=l===void 0?5:l,d=n.tickRotation,m=d===void 0?0:d,v=n.format,p=n.renderTick,y=p===void 0?Ao:p,k=n.truncateTickAt,b=n.legend,T=n.legendPosition,x=T===void 0?"end":T,C=n.legendOffset,$=C===void 0?0:C,G=n.onClick,wn=n.ariaHidden,ln=Ln(),W=ln.axis.legend.text,O=D.useMemo(function(){return qt(v,t)},[v,t]),rn=Wt({axis:e,scale:t,ticksPosition:c,tickValues:f,tickSize:g,tickPadding:h,tickRotation:m,truncateTickAt:k}),K=rn.ticks,V=rn.textAlign,gn=rn.textBaseline,P=null;if(b!==void 0){var w,I=0,B=0,kn=0;e==="y"?(kn=-90,I=$,x==="start"?(w="start",B=o):x==="middle"?(w="middle",B=o/2):x==="end"&&(w="end")):(B=$,x==="start"?w="start":x==="middle"?(w="middle",I=o/2):x==="end"&&(w="end",I=o)),P=S.jsxs(S.Fragment,{children:[W.outlineWidth>0&&S.jsx("text",{transform:"translate("+I+", "+B+") rotate("+kn+")",textAnchor:w,style:E({dominantBaseline:"central"},W),strokeWidth:2*W.outlineWidth,stroke:W.outlineColor,strokeLinejoin:"round",children:b}),S.jsx("text",{transform:"translate("+I+", "+B+") rotate("+kn+")",textAnchor:w,style:E({dominantBaseline:"central"},W),children:b})]})}var ie=ze(),ae=ie.animate,ue=ie.config,Tn=Nr({transform:"translate("+i+","+a+")",lineX2:e==="x"?o:0,lineY2:e==="x"?0:o,config:ue,immediate:!ae}),Cn=D.useCallback(function(_){return{opacity:1,transform:"translate("+_.x+","+_.y+")",textTransform:"translate("+_.textX+","+_.textY+") rotate("+m+")"}},[m]),Xt=D.useCallback(function(_){return{opacity:0,transform:"translate("+_.x+","+_.y+")",textTransform:"translate("+_.textX+","+_.textY+") rotate("+m+")"}},[m]),zt=Ge(K,{keys:function(_){return _.key},initial:Cn,from:Xt,enter:Cn,update:Cn,leave:{opacity:0},config:ue,immediate:!ae});return S.jsxs(nn.g,{transform:Tn.transform,"aria-hidden":wn,children:[zt(function(_,Gt,No,Kt){return D.createElement(y,E({tickIndex:Kt,format:O,rotate:m,textBaseline:gn,textAnchor:V,truncateTickAt:k,animatedProps:_},Gt,G?{onClick:G}:{}))}),S.jsx(nn.line,{style:ln.axis.domain.line,x1:0,x2:Tn.lineX2,y1:0,y2:Tn.lineY2}),P]})},_o=D.memo(Do),Uo={ticksPosition:M.oneOf(["before","after"]),tickValues:M.oneOfType([M.number,M.arrayOf(M.oneOfType([M.number,M.string,M.instanceOf(Date)])),M.string]),rotateOnTickLength:M.shape({angle:M.number,length:M.number}),tickSize:M.number,tickPadding:M.number,tickRotation:M.number,format:M.oneOfType([M.func,M.string]),renderTick:M.func,legend:M.node,legendPosition:M.oneOf(["start","middle","end"]),legendOffset:M.number,ariaHidden:M.bool},Ro=M.shape(Uo),Lt=["top","right","bottom","left"],jo=D.memo(function(n){var e=n.xScale,t=n.yScale,r=n.width,i=n.height,u={top:n.top,right:n.right,bottom:n.bottom,left:n.left};return S.jsx(S.Fragment,{children:Lt.map(function(a){var o=u[a];if(!o)return null;var c=a==="top"||a==="bottom";return S.jsx(_o,E({},o,{axis:c?"x":"y",x:a==="right"?r:0,y:a==="bottom"?i:0,scale:c?e:t,length:c?r:i,ticksPosition:a==="top"||a==="left"?"before":"after",truncateTickAt:o.truncateTickAt}),a)})})}),Fo=D.memo(function(n){var e=n.animatedProps,t=Ln();return S.jsx(nn.line,E({},e,t.grid.line))}),Oe=D.memo(function(n){var e=n.lines,t=ze(),r=t.animate,i=t.config,u=Ge(e,{keys:function(a){return a.key},initial:function(a){return{opacity:1,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2}},from:function(a){return{opacity:0,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2}},enter:function(a){return{opacity:1,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2}},update:function(a){return{opacity:1,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2}},leave:{opacity:0},config:i,immediate:!r});return S.jsx("g",{children:u(function(a,o){return D.createElement(Fo,E({},o,{key:o.key,animatedProps:a}))})})}),Io=D.memo(function(n){var e=n.width,t=n.height,r=n.xScale,i=n.yScale,u=n.xValues,a=n.yValues,o=D.useMemo(function(){return!!r&&Wn({width:e,height:t,scale:r,axis:"x",values:u})},[r,u,e,t]),c=D.useMemo(function(){return!!i&&Wn({width:e,height:t,scale:i,axis:"y",values:a})},[t,e,i,a]);return S.jsxs(S.Fragment,{children:[o&&S.jsx(Oe,{lines:o}),c&&S.jsx(Oe,{lines:c})]})}),Eo=function(n,e){var t,r=e.axis,i=e.scale,u=e.x,a=u===void 0?0:u,o=e.y,c=o===void 0?0:o,f=e.length,s=e.ticksPosition,g=e.tickValues,l=e.tickSize,h=l===void 0?5:l,d=e.tickPadding,m=d===void 0?5:d,v=e.tickRotation,p=v===void 0?0:v,y=e.format,k=e.legend,b=e.legendPosition,T=b===void 0?"end":b,x=e.legendOffset,C=x===void 0?0:x,$=e.theme,G=Wt({axis:r,scale:i,ticksPosition:s,tickValues:g,tickSize:h,tickPadding:m,tickRotation:p,engine:"canvas"}),wn=G.ticks,ln=G.textAlign,W=G.textBaseline;n.save(),n.translate(a,c),n.textAlign=ln,n.textBaseline=W;var O=$.axis.ticks.text;n.font=(O.fontWeight?O.fontWeight+" ":"")+O.fontSize+"px "+O.fontFamily,((t=$.axis.domain.line.strokeWidth)!=null?t:0)>0&&(n.lineWidth=Number($.axis.domain.line.strokeWidth),n.lineCap="square",$.axis.domain.line.stroke&&(n.strokeStyle=$.axis.domain.line.stroke),n.beginPath(),n.moveTo(0,0),n.lineTo(r==="x"?f:0,r==="x"?0:f),n.stroke());var rn=typeof y=="function"?y:function(w){return""+w};if(wn.forEach(function(w){var I;((I=$.axis.ticks.line.strokeWidth)!=null?I:0)>0&&(n.lineWidth=Number($.axis.ticks.line.strokeWidth),n.lineCap="square",$.axis.ticks.line.stroke&&(n.strokeStyle=$.axis.ticks.line.stroke),n.beginPath(),n.moveTo(w.x,w.y),n.lineTo(w.x+w.lineX,w.y+w.lineY),n.stroke());var B=rn(w.value);n.save(),n.translate(w.x+w.textX,w.y+w.textY),n.rotate(fe(p)),O.outlineWidth>0&&(n.strokeStyle=O.outlineColor,n.lineWidth=2*O.outlineWidth,n.lineJoin="round",n.strokeText(""+B,0,0)),$.axis.ticks.text.fill&&(n.fillStyle=O.fill),n.fillText(""+B,0,0),n.restore()}),k!==void 0){var K=0,V=0,gn=0,P="center";r==="y"?(gn=-90,K=C,T==="start"?(P="start",V=f):T==="middle"?(P="center",V=f/2):T==="end"&&(P="end")):(V=C,T==="start"?P="start":T==="middle"?(P="center",K=f/2):T==="end"&&(P="end",K=f)),n.translate(K,V),n.rotate(fe(gn)),n.font=($.axis.legend.text.fontWeight?$.axis.legend.text.fontWeight+" ":"")+$.axis.legend.text.fontSize+"px "+$.axis.legend.text.fontFamily,$.axis.legend.text.fill&&(n.fillStyle=$.axis.legend.text.fill),n.textAlign=P,n.textBaseline="middle",n.fillText(k,0,0)}n.restore()},Bo=function(n,e){var t=e.xScale,r=e.yScale,i=e.width,u=e.height,a=e.top,o=e.right,c=e.bottom,f=e.left,s=e.theme,g={top:a,right:o,bottom:c,left:f};Lt.forEach(function(l){var h=g[l];if(!h)return null;var d=l==="top"||l==="bottom",m=l==="top"||l==="left"?"before":"after",v=d?t:r,p=qt(h.format,v);Eo(n,E({},h,{axis:d?"x":"y",x:l==="right"?i:0,y:l==="bottom"?u:0,scale:v,format:p,length:d?i:u,ticksPosition:m,theme:s}))})},Wo=function(n,e){var t=e.width,r=e.height,i=e.scale,u=e.axis,a=e.values;Wn({width:t,height:r,scale:i,axis:u,values:a}).forEach(function(o){n.beginPath(),n.moveTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.stroke()})};export{Wo as D,jo as X,Cu as _,Yt as a,Fe as c,Ho as d,Bo as j,du as q,Ro as w,Io as z};
